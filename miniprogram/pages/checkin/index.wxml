<view class="checkin_container">
  <!-- 标签页 -->
  <view class="tabs">
    <view class="tab-item {{currentTab === 0 ? 'active' : ''}}"
      bindtap="switchTab"
      data-index="0">
      我的目标
      <view wx:if="{{uncheckedCount > 0}}" class="badge">
        {{uncheckedCount > 99 ? '99+' : uncheckedCount}}
      </view>
    </view>
    <view class="tab-item {{currentTab === 1 ? 'active' : ''}}"
      bindtap="switchTab"
      data-index="1">
      我激励的
      <view wx:if="{{reminderCount > 0}}" class="badge">
        {{reminderCount > 99 ? '99+' : reminderCount}}
      </view>
    </view>
  </view>

  <!-- 列表区域 -->
  <scroll-view class="list-container"
    scroll-y 
    bindrefresherrefresh="onPullDownRefresh"
    refresher-enabled="{{true}}"
    refresher-triggered="{{refreshing}}"
    bindscrolltolower="onReachBottom">
    <block wx:for="{{checkinList}}" wx:key="id">
      <view class="list-item" bindtap="checkinDetail">
        <view class="item-content">
          <view class="item-creator">
            <text class="creator-name">{{item.creator.name}}</text>
            <text class="create-date">{{item.createDate}}</text>
            <text class="create-text">创建了目标</text>
          </view>
          <text class="item-title">{{item.title}}</text>
          <view class="progress-info">
            <view class="progress-bar">
              <view class="progress-inner" style="width: {{(item.currentDay/item.totalDays * 100)}}%"></view>
            </view>
            <view class="progress-text">
              <text class="current">{{item.currentDay}}</text>
              <text class="separator">/</text>
              <text class="total">{{item.totalDays}}天</text>
            </view>
          </view>
        </view>
        <view class="item-right">
          <view class="status-group">
            <text class="today-text">今日</text>
            <view class="item-status {{item.checked ? 'checked' : 'unchecked'}}">
              {{item.checked ? '已打卡' : '未打卡'}}
            </view>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>
</view>