 <view class="target_container">
  <!-- 类型选择 -->
  <view class="form-item">
    <text class="label">目标类型</text>
    <picker 
      mode="selector" 
      range="{{targetTypes}}" 
      range-key="name"
      bindchange="handleTypeChange"
    >
      <view class="pickerGoal">
        {{selectedType.name || '请选择目标类型'}}
      </view>
    </picker>
  </view>


<!-- 截止时间 -->
<view class="form-item">
  <text class="label">截止时间</text>
  <picker 
    mode="date" 
    start="{{minDate}}"
    end="{{maxDate}}"
    bindchange="handleDateChange"
  >
    <view class="pickerDate">
      {{selectedDate || '请选择截止日期'}}
    </view>
  </picker>
</view>


  <!-- 目标描述 -->
  <view class="form-item">
    <text class="label">目标描述</text>
    <textarea 
      class="input"
      placeholder="请输入你的目标描述"
      maxlength="200"
      auto-height
      bindinput="handleDescriptionChange"
    />
  </view>

  <!-- 保证金 -->
  <view class="form-item">
    <text class="label">保证金</text>
    <view class="input-container">
      <text class="currency">¥</text>
      <input 
        type="digit"
        class="input"
        placeholder="请输入保证金金额"
        bindinput="handleDepositChange"
      />
    </view>

  </view>



    <!-- 保证金说明 -->
    <view class="deposit-tip">
          <text class="tip-text">
              ℹ️ 达成目标即退全额保证金🌟
          </text>
          <text class="tip-text">
              ℹ️ 达成目标可获得更多奖励🌟
          </text>
          <text class="tip-text">
              ℹ️ 达成目标的诀窍就是坚持🌟
          </text>
        </view>

  <!-- 用户协议部分 -->
<view class="agreement-section">
  <checkbox-group bindchange="handleAgreementChange">
    <label class="agreement-label">
      <checkbox value="agreed" checked="{{hasAgreed}}" />
      <text>我已阅读并同意</text>
      <text class="agreement-link" catchtap="showAgreement">《用户服务协议》</text>
    </label>
  </checkbox-group>
</view>



  <!-- 提交按钮 -->
  <view class="actions">
    <button class="submit-btn" bindtap="handleSubmit">创建目标</button>
  </view>
</view>


<!-- 协议弹窗 -->
<view class="agreement-popup {{showAgreementPopup ? 'show' : ''}}" catchtouchmove="preventTouchMove">
  <view class="agreement-content">
    <view class="agreement-header">
      <text class="agreement-title">用户服务协议</text>
      <text class="close-btn" bindtap="hideAgreement">×</text>
    </view>
            <!-- 其他代码保持不变，只更新协议弹窗内容部分 -->
          <scroll-view scroll-y class="agreement-text">
            <view class="agreement-content-text">
              <view class="section">
                <view class="sub-title">一、服务说明</view>
                <text class="paragraph">本应用是一款帮助用户通过保证金激励机制来培养良好习惯的打卡应用。用户可以设定目标，并通过按时打卡来完成目标。</text>
              </view>

              <view class="section">
                <view class="sub-title">二、保证金规则</view>
                <text class="paragraph">1. 保证金是用户自愿缴纳的资金，用于激励自己完成目标。</text>
                <text class="paragraph">2. 保证金金额由用户自行设定，一旦确认后不可更改。</text>
                <text class="paragraph">3. 若用户完成目标（达到规定打卡次数），保证金将全额退还。</text>
                <text class="paragraph">4. 若用户未能完成目标，保证金将按照未完成比例进行扣除。</text>
                <text class="paragraph">5. 保证金暂由平台托管，承诺资金安全。</text>
              </view>

              <view class="section">
                <view class="sub-title">三、打卡规则</view>
                <text class="paragraph">1. 用户需在设定的时间段内完成打卡。</text>
                <text class="paragraph">2. 每日仅可打卡一次，不可补卡。</text>
                <text class="paragraph">3. 系统自动记录打卡时间，请确保打卡真实有效。</text>
                <text class="paragraph">4. 如遇特殊情况（如系统故障），请及时联系客服。</text>
              </view>

              <view class="section">
                <view class="sub-title">四、退款规则</view>
                <text class="paragraph">1. 目标完成后的保证金将在3个工作日内退还。</text>
                <text class="paragraph">2. 退还金额将原路返回用户支付账户。</text>
                <text class="paragraph">3. 如遇退款问题，可联系客服处理。</text>
              </view>

              <view class="section">
                <view class="sub-title">五、用户义务</view>
                <text class="paragraph">1. 用户应确保提供真实、准确的个人信息。</text>
                <text class="paragraph">2. 用户应遵守平台规则，不得作弊或违规操作。</text>
                <text class="paragraph">3. 因不可抗力导致无法打卡，应及时与平台沟通。</text>
              </view>

              <view class="section">
                <view class="sub-title">六、免责声明</view>
                <text class="paragraph">1. 平台有权对违规用户采取相应措施。</text>
                <text class="paragraph">2. 平台保留对本协议的最终解释权。</text>
                <text class="paragraph">3. 如有争议，双方应友好协商解决。</text>
              </view>
            </view>
          </scroll-view>

    <view class="agreement-footer">
      <button class="confirm-btn" bindtap="hideAgreement">我知道了</button>
    </view>
  </view>
</view>